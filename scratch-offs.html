<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Scratch-Off Lottery ‚Äî ORANGE CASINO</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Advertisement System -->
    <div class="ad-container left ad-1" onclick="window.open('popup-hell.html', '_blank')">
      <img src="images/ad1.svg" class="ad-svg" alt="Ad 1">
      <div class="ad-text">Kraft Singles!</div>
    </div>
    <div class="ad-container left ad-2" onclick="window.open('popup-hell.html', '_blank')">
      <img src="images/ad2.svg" class="ad-svg" alt="Ad 2">
      <div class="ad-text">Doctors Hate This!</div>
    </div>
    <div class="ad-container right ad-3" onclick="window.open('popup-hell.html', '_blank')">
      <img src="images/ad3.svg" class="ad-svg" alt="Ad 3">
      <div class="ad-text">Make Money!</div>
    </div>
    <div class="ad-container right ad-4" onclick="window.open('popup-hell.html', '_blank')">
      <img src="images/ad4.svg" class="ad-svg" alt="Ad 4">
      <div class="ad-text">You Won't Believe!</div>
    </div>

    <header class="site-header">
      <div class="container">
        <h1 class="brand">ORANGE CASINO</h1>
        <nav class="main-nav">
          <a href="index.html">Home</a>
          <a href="slot.html">Slots</a>
          <a href="blackjack.html">Blackjack</a>
          <a href="poker.html">Poker</a>
          <a href="scratch-offs.html">Scratch-Offs</a>
          <a href="achievements.html">Achievements</a>
        </nav>
        <div class="balance" id="balance">Balance: $<span id="balance-value">1000</span><span class="debt">Debt: $<span id="debt-value">0</span></span></div>
      </div>
    </header>

    <main class="container">
      <div class="page-header">
        <h2>üé´ Scratch-Off Lottery</h2>
        <p class="page-subtitle">Try your luck with instant win scratch-off tickets!</p>
      </div>
      
      <div class="game-stage">
        <div class="game-panel scratch-panel">
          
          <div class="active-ticket-area" id="active-ticket-area" style="display: none;">
            <h3>üé´ Your Ticket</h3>
            <div class="active-ticket" id="active-ticket">
              <!-- Active ticket will be inserted here -->
            </div>
            <div class="scratch-instructions">
              <p>Click on the gray areas to scratch off and reveal your prizes!</p>
              <button class="btn scratch-all-btn" id="scratch-all-btn">Scratch All</button>
              <button class="btn new-ticket-btn" id="new-ticket-btn">Buy Same Ticket Again</button>
            </div>
          </div>

          <div class="ticket-selection">
            <h3>üéüÔ∏è Available Tickets</h3>
            <div class="ticket-grid">
              
              <div class="ticket-option" data-ticket="lucky7">
                <div class="ticket-preview lucky7-ticket">
                  <div class="ticket-header">
                    <h4>üçÄ Lucky 7s</h4>
                    <div class="ticket-price">$5</div>
                  </div>
                  <div class="ticket-body">
                    <div class="scratch-area">
                      <div class="prize-info">Match 3 sevens to win!</div>
                      <div class="scratch-spots">
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                      </div>
                    </div>
                    <div class="prize-table">
                      <div>üí∞ Top Prize: $50</div>
                      <div>üéØ Odds: 1 in 5 for money back</div>
                    </div>
                  </div>
                </div>
                <button class="btn buy-ticket-btn" data-ticket="lucky7" data-price="5">Buy Ticket - $5</button>
              </div>

              <div class="ticket-option" data-ticket="goldmine">
                <div class="ticket-preview goldmine-ticket">
                  <div class="ticket-header">
                    <h4>‚õèÔ∏è Gold Mine</h4>
                    <div class="ticket-price">$10</div>
                  </div>
                  <div class="ticket-body">
                    <div class="scratch-area">
                      <div class="prize-info">Find 3 gold nuggets!</div>
                      <div class="scratch-spots">
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                      </div>
                    </div>
                    <div class="prize-table">
                      <div>üí∞ Top Prize: $500</div>
                      <div>üéØ Odds: 1 in 5 for money back</div>
                    </div>
                  </div>
                </div>
                <button class="btn buy-ticket-btn" data-ticket="goldmine" data-price="10">Buy Ticket - $10</button>
              </div>

              <div class="ticket-option" data-ticket="jackpot">
                <div class="ticket-preview jackpot-ticket">
                  <div class="ticket-header">
                    <h4>üíé Diamond Jackpot</h4>
                    <div class="ticket-price">$25</div>
                  </div>
                  <div class="ticket-body">
                    <div class="scratch-area">
                      <div class="prize-info">Match winning number!</div>
                      <div class="scratch-spots">
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                      </div>
                    </div>
                    <div class="prize-table">
                      <div>üí∞ Top Prize: $5,000</div>
                      <div>üéØ Odds: 1 in 5 for money back</div>
                    </div>
                  </div>
                </div>
                <button class="btn buy-ticket-btn" data-ticket="jackpot" data-price="25">Buy Ticket - $25</button>
              </div>

              <div class="ticket-option" data-ticket="millionaire">
                <div class="ticket-preview millionaire-ticket">
                  <div class="ticket-header">
                    <h4>üí∞ Millionaire Dreams</h4>
                    <div class="ticket-price">$50</div>
                  </div>
                  <div class="ticket-body">
                    <div class="scratch-area">
                      <div class="prize-info">Live the dream!</div>
                      <div class="scratch-spots millionaire-spots">
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                      </div>
                    </div>
                    <div class="prize-table">
                      <div>üí∞ Top Prize: $50,000</div>
                      <div>üéØ Odds: 1 in 50 for money back</div>
                    </div>
                  </div>
                </div>
                <button class="btn buy-ticket-btn" data-ticket="millionaire" data-price="50">Buy Ticket - $50</button>
              </div>

              <div class="ticket-option" data-ticket="platinum">
                <div class="ticket-preview platinum-ticket">
                  <div class="ticket-header">
                    <h4>üî± Platinum Elite</h4>
                    <div class="ticket-price">$100</div>
                  </div>
                  <div class="ticket-body">
                    <div class="scratch-area">
                      <div class="prize-info">Elite status!</div>
                      <div class="scratch-spots platinum-spots">
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                      </div>
                    </div>
                    <div class="prize-table">
                      <div>üí∞ Top Prize: $100,000</div>
                      <div>üéØ Odds: 1 in 75 for money back</div>
                    </div>
                  </div>
                </div>
                <button class="btn buy-ticket-btn" data-ticket="platinum" data-price="100">Buy Ticket - $100</button>
              </div>

              <div class="ticket-option" data-ticket="megajackpot">
                <div class="ticket-preview megajackpot-ticket">
                  <div class="ticket-header">
                    <h4>üéä Mega Jackpot Supreme</h4>
                    <div class="ticket-price">$250</div>
                  </div>
                  <div class="ticket-body">
                    <div class="scratch-area">
                      <div class="prize-info">Ultimate jackpot!</div>
                      <div class="scratch-spots megajackpot-spots">
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                        <div class="spot">?</div>
                      </div>
                    </div>
                    <div class="prize-table">
                      <div>üí∞ Top Prize: $1,000,000</div>
                      <div>üéØ Odds: 1 in 100 for money back</div>
                    </div>
                  </div>
                </div>
                <button class="btn buy-ticket-btn" data-ticket="megajackpot" data-price="250">Buy Ticket - $250</button>
              </div>

            </div>
          </div>

          <div class="scratch-log">
            <h4>üé∞ Recent Results</h4>
            <div class="log" id="scratch-log"></div>
          </div>
        </div>

        <aside class="game-controls">
          <div class="control-panel stats-panel">
            <h4>üìä Your Stats</h4>
            <div class="stat-item">
              <span class="stat-label">Tickets Bought:</span>
              <span class="stat-value" id="tickets-bought">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Total Spent:</span>
              <span class="stat-value" id="total-spent">$0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Total Won:</span>
              <span class="stat-value" id="total-won">$0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Net Profit:</span>
              <span class="stat-value" id="net-profit">$0</span>
            </div>
            <button class="btn reset-btn" id="reset-stats-btn">üîÑ Reset Stats</button>
          </div>
          
          <div class="control-panel rules-panel">
            <h4>üìã How to Play</h4>
            <div class="rules-list">
              <div class="rule-item">‚Ä¢ Choose a scratch-off ticket type</div>
              <div class="rule-item">‚Ä¢ Click "Buy Ticket" to purchase</div>
              <div class="rule-item">‚Ä¢ Click gray areas to scratch off</div>
              <div class="rule-item">‚Ä¢ Match symbols/numbers to win</div>
              <div class="rule-item">‚Ä¢ Higher priced tickets = bigger prizes</div>
              <div class="rule-item">‚Ä¢ Winnings added automatically</div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">Made with ‚ù§Ô∏è ‚Äî demo only. No real money.</div>
    </footer>

    <script src="scripts/todd-dialogue.js"></script>
    <script src="scripts/app.js"></script>
    <script src="scripts/scratch-offs.js"></script>
    
    <script>
      // Ghost Code System for Scratch-Offs
      let scratchCheatSequence = [];
      const scratchCodes = {
        'winner': { reward: 4600, message: 'üé´ WINNER activated! +$4,600!', used: false },
        'scratch': { reward: 4100, message: 'ü™ô SCRATCH activated! +$4,100!', used: false },
        'ticket': { reward: 3600, message: 'üéüÔ∏è TICKET activated! +$3,600!', used: false },
        'lottery': { reward: 3100, message: 'üçÄ LOTTERY activated! +$3,100!', used: false },
        'coins': { reward: 2600, message: 'ü™ô COINS activated! +$2,600!', used: false }
      };

      // Load used codes from localStorage
      function loadScratchUsedCodes() {
        const saved = localStorage.getItem('scratch_codes_used');
        if (saved) {
          const usedCodes = JSON.parse(saved);
          Object.keys(usedCodes).forEach(code => {
            if (scratchCodes[code]) {
              scratchCodes[code].used = usedCodes[code];
            }
          });
        }
      }

      // Save used codes to localStorage
      function saveScratchUsedCodes() {
        const usedCodes = {};
        Object.keys(scratchCodes).forEach(code => {
          usedCodes[code] = scratchCodes[code].used;
        });
        localStorage.setItem('scratch_codes_used', JSON.stringify(usedCodes));
      }

      document.addEventListener('keydown', function(e) {
        scratchCheatSequence.push(e.key.toLowerCase());
        
        // Check against all codes
        Object.keys(scratchCodes).forEach(code => {
          if (scratchCheatSequence.length >= code.length) {
            const recentKeys = scratchCheatSequence.slice(-code.length).join('');
            
            if (recentKeys === code && !scratchCodes[code].used) {
              // Code matched and not used yet
              const currentBalance = window.vc.readBalance();
              window.vc.writeBalance(currentBalance + scratchCodes[code].reward);
              
              // Show confetti and big message
              if (window.vc.confetti) window.vc.confetti();
              if (window.vc.showBigMessage) window.vc.showBigMessage(scratchCodes[code].message, 3000);
              if (window.vc.setBuddyText) window.vc.setBuddyText(scratchCodes[code].message);
              
              // Mark ghost code achievement
              if (window.vc.markGhostCodeMain) window.vc.markGhostCodeMain();
              
              // Mark as used
              scratchCodes[code].used = true;
              saveScratchUsedCodes();
              
              // Reset sequence
              scratchCheatSequence = [];
            }
          }
        });
        
        // Keep sequence reasonable length
        if (scratchCheatSequence.length > 20) {
          scratchCheatSequence = scratchCheatSequence.slice(-20);
        }
      });

      // Load used codes on page load
      document.addEventListener('DOMContentLoaded', function() {
        loadScratchUsedCodes();
        // Mark scratch-offs as visited for achievement
        if (window.vc && window.vc.markScratchVisited) {
          window.vc.markScratchVisited();
        }
      });
    </script>
    <div class="buddy" id="buddy">
      <img src="images/buddy.svg" alt="Buddy" />
      <div>
        <div class="name">Donny Boy</div>
        <div class="text" id="buddy-text">Try your luck with scratch-offs!</div>
      </div>
    </div>
    <div class="big-overlay" id="big-overlay"><div class="message" id="big-message"></div></div>
    <div id="confetti-root"></div>
  </body>
</html>