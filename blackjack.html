<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Blackjack — ORANGE CASINO</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Advertisement System -->
    <div class="ad-container left ad-1" onclick="window.open('popup-hell.html', '_blank')">
      <img src="images/ad1.svg" class="ad-svg" alt="Ad 1">
      <div class="ad-text">Kraft Singles!</div>
    </div>
    <div class="ad-container left ad-2" onclick="window.open('popup-hell.html', '_blank')">
      <img src="images/ad2.svg" class="ad-svg" alt="Ad 2">
      <div class="ad-text">Doctors Hate This!</div>
    </div>
    <div class="ad-container right ad-3" onclick="window.open('popup-hell.html', '_blank')">
      <img src="images/ad3.svg" class="ad-svg" alt="Ad 3">
      <div class="ad-text">Make Money!</div>
    </div>
    <div class="ad-container right ad-4" onclick="window.open('popup-hell.html', '_blank')">
      <img src="images/ad4.svg" class="ad-svg" alt="Ad 4">
      <div class="ad-text">You Won't Believe!</div>
    </div>

    <header class="site-header">
      <div class="container">
  <h1 class="brand">ORANGE CASINO</h1>
        <nav class="main-nav">
          <a href="index.html">Home</a>
          <a href="slot.html">Slots</a>
          <a href="blackjack.html">Blackjack</a>
          <a href="poker.html">Poker</a>
          <a href="scratch-offs.html">Scratch-Offs</a>
          <a href="achievements.html">Achievements</a>
        </nav>
  <div class="balance" id="balance">Balance: $<span id="balance-value">1000</span><span class="debt">Debt: $<span id="debt-value">0</span></span></div>
      </div>
    </header>

    <main class="container">
      <div class="page-header">
        <h2>🃏 Blackjack</h2>
        <p class="page-subtitle">Beat the dealer and get as close to 21 as you can!</p>
      </div>
      
      <div class="game-stage">
        <div class="game-panel blackjack-table">
          <div class="table-section dealer-section">
            <div class="player-header">
              <h3>🎩 Dealer</h3>
              <span id="dealer-score" class="score-display"></span>
            </div>
            <div id="dealer-hand" class="card-row"></div>
          </div>
          
          <div class="table-divider"></div>
          
          <div class="table-section player-section">
            <div class="player-header">
              <h3>👤 You</h3>
              <span id="player-score" class="score-display"></span>
            </div>
            <div id="player-hand" class="card-row"></div>
          </div>
          
          <div class="game-actions">
            <button class="btn deal-btn" id="deal">🆕 Deal New Hand</button>
            <button class="btn hit-btn" id="hit">👆 Hit</button>
            <button class="btn stand-btn" id="stand">✋ Stand</button>
          </div>
          
          <div class="game-log">
            <h4>📋 Game History</h4>
            <div class="log" id="bj-log"></div>
          </div>
        </div>

        <aside class="game-controls">
          <div class="control-panel bet-panel">
            <h4>💰 Betting Controls</h4>
            <div class="bet-section">
              <label class="bet-label">Bet Amount:</label>
              <input id="bj-bet" class="bet-input" type="number" value="20" min="1">
            </div>
          </div>
          
          <div class="control-panel rules-panel">
            <h4>📖 Game Rules</h4>
            <div class="rules-list">
              <div class="rule-item">🎯 Get as close to 21 as possible</div>
              <div class="rule-item">🎯 Dealer stands on 17</div>
              <div class="rule-item">🎯 Aces count as 1 or 11</div>
              <div class="rule-item">🎯 Face cards worth 10</div>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">Made with ❤️ — demo only. No real money.</div>
    </footer>

    <script src="scripts/todd-dialogue.js"></script>
    <script src="scripts/app.js"></script>
    <script src="scripts/blackjack.clean.js"></script>
    
    <script>
      // Ghost Code System for Blackjack
      let blackjackCheatSequence = [];
      const blackjackCodes = {
        'twentyone': { reward: 4700, message: '♠️ TWENTYONE activated! +$4,700!', used: false },
        'natural': { reward: 4300, message: '🃏 NATURAL activated! +$4,300!', used: false },
        'dealer': { reward: 3900, message: '🎩 DEALER activated! +$3,900!', used: false },
        'cards': { reward: 3500, message: '🂡 CARDS activated! +$3,500!', used: false },
        'hit': { reward: 3100, message: '👊 HIT activated! +$3,100!', used: false }
      };

      // Load used codes from localStorage
      function loadBlackjackUsedCodes() {
        const saved = localStorage.getItem('blackjack_codes_used');
        if (saved) {
          const usedCodes = JSON.parse(saved);
          Object.keys(usedCodes).forEach(code => {
            if (blackjackCodes[code]) {
              blackjackCodes[code].used = usedCodes[code];
            }
          });
        }
      }

      // Save used codes to localStorage
      function saveBlackjackUsedCodes() {
        const usedCodes = {};
        Object.keys(blackjackCodes).forEach(code => {
          usedCodes[code] = blackjackCodes[code].used;
        });
        localStorage.setItem('blackjack_codes_used', JSON.stringify(usedCodes));
      }

      document.addEventListener('keydown', function(e) {
        blackjackCheatSequence.push(e.key.toLowerCase());
        
        // Check against all codes
        Object.keys(blackjackCodes).forEach(code => {
          if (blackjackCheatSequence.length >= code.length) {
            const recentKeys = blackjackCheatSequence.slice(-code.length).join('');
            
            if (recentKeys === code && !blackjackCodes[code].used) {
              // Code matched and not used yet
              const currentBalance = window.vc.readBalance();
              window.vc.writeBalance(currentBalance + blackjackCodes[code].reward);
              
              // Show confetti and big message
              if (window.vc.confetti) window.vc.confetti();
              if (window.vc.showBigMessage) window.vc.showBigMessage(blackjackCodes[code].message, 3000);
              if (window.vc.setBuddyText) window.vc.setBuddyText(blackjackCodes[code].message);
              
              // Mark ghost code achievement
              if (window.vc.markGhostCodeMain) window.vc.markGhostCodeMain();
              
              // Mark as used
              blackjackCodes[code].used = true;
              saveBlackjackUsedCodes();
              
              // Reset sequence
              blackjackCheatSequence = [];
            }
          }
        });
        
        // Keep sequence reasonable length
        if (blackjackCheatSequence.length > 20) {
          blackjackCheatSequence = blackjackCheatSequence.slice(-20);
        }
      });

      // Load used codes on page load
      document.addEventListener('DOMContentLoaded', function() {
        loadBlackjackUsedCodes();
        // Mark blackjack as visited for achievement
        if (window.vc && window.vc.markBlackjackVisited) {
          window.vc.markBlackjackVisited();
        }
      });
    </script>
    <div class="buddy" id="buddy">
      <img src="images/buddy.svg" alt="Buddy" />
      <div>
        <div class="name">Donny Boy</div>
        <div class="text" id="buddy-text">Hit me, champ!</div>
      </div>
    </div>
    <div class="big-overlay" id="big-overlay"><div class="message" id="big-message"></div></div>
    <div id="confetti-root"></div>
  </body>
</html>
